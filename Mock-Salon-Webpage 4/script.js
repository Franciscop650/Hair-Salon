// Translations
const translations = {
  en: {
    // Brand
    'brand.name': 'El Y Ella',
    'brand.tagline': 'Beauty & Style Salon',
    
    // Navigation
    'nav.home': 'Home',
    'nav.services': 'Services',
    'nav.book': 'Book Now',
    
    // Home Page
    'home.hero.title': 'El Y Ella',
    'home.hero.subtitle': 'Where elegance meets expertise. Transform your look with our premium hair and beauty services.',
    'home.hero.book': 'Book Appointment',
    'home.hero.services': 'View Services',
    
    'home.about.title': 'Welcome to El Y Ella',
    'home.about.description1': 'With over 15 years of experience in the beauty industry, our team of expert stylists and beauty professionals are dedicated to making you look and feel your absolute best.',
    'home.about.description2': 'We use only the finest products and latest techniques to ensure every visit leaves you feeling pampered and beautiful. From precision cuts to luxurious treatments, we provide a complete beauty experience in our elegant, welcoming salon.',
    'home.about.years': 'Years Experience',
    'home.about.clients': 'Happy Clients',
    
    'home.services.title': 'Our Services',
    'home.services.subtitle': 'Discover our range of premium beauty services designed to enhance your natural beauty',
    'home.services.hair.title': 'Hair Services',
    'home.services.hair.description': 'Expert cuts, colors, and styling for all hair types. Transform your look with our precision techniques.',
    'home.services.beauty.title': 'Beauty Treatments',
    'home.services.beauty.description': 'Rejuvenating facials, skincare treatments, and beauty services to enhance your natural glow.',
    'home.services.nails.title': 'Nail Care',
    'home.services.nails.description': 'Complete nail care services including manicures, pedicures, and nail art by skilled technicians.',
    'home.services.viewAll': 'View All Services',
    
    'home.contact.title': 'Visit Us',
    'home.contact.subtitle': 'Find us in the heart of the city, ready to serve you',
    'home.contact.location': 'Location',
    'home.contact.contact': 'Contact',
    'home.contact.hours': 'Hours',
    'home.contact.hours.weekdays': 'Mon-Fri: 9:00 AM - 8:00 PM',
    'home.contact.hours.saturday': 'Saturday: 9:00 AM - 6:00 PM',
    'home.contact.hours.sunday': 'Sunday: 10:00 AM - 5:00 PM',
    
    // Services Page
    'services.hero.title': 'Our Services',
    'services.hero.subtitle': 'Premium beauty services tailored to your unique style',
    
    'services.hair.title': 'Hair Services',
    'services.hair.subtitle': 'Expert hair care and styling by our professional team',
    'services.hair.cuts': 'Cuts & Styling',
    'services.hair.color': 'Color Services',
    
    'services.beauty.title': 'Beauty Treatments',
    'services.beauty.subtitle': 'Rejuvenating treatments for your skin and well-being',
    'services.beauty.facial': 'Facial Treatments',
    'services.beauty.additional': 'Additional Treatments',
    
    'services.nails.title': 'Nail Services',
    'services.nails.subtitle': 'Complete nail care for hands and feet',
    'services.nails.manicure': 'Manicure Services',
    'services.nails.pedicure': 'Pedicure Services',
    
    // Reservations Page
    'reservations.hero.title': 'Book Your Appointment',
    'reservations.hero.subtitle': 'Schedule your beauty transformation today',
    'reservations.form.title': 'Reservation Form',
    'reservations.submit': 'Submit Reservation Request',
    
    // Form Labels
    'form.firstName': 'First Name',
    'form.lastName': 'Last Name',
    'form.email': 'Email Address',
    'form.phone': 'Phone Number',
    'form.service': 'Service Category',
    'form.stylist': 'Preferred Stylist',
    'form.date': 'Preferred Date',
    'form.time': 'Preferred Time',
    'form.specificService': 'Specific Service Details',
    'form.specialRequests': 'Special Requests or Notes',
    'form.newClient': 'I am a new client',
    'form.noPreference': 'No preference',
    
    // Footer
    'footer.company': 'El Y Ella Beauty Salon',
    'footer.description': 'Your premier destination for luxury hair and beauty services. Experience the difference with our expert team.',
    'footer.quickLinks': 'Quick Links',
    'footer.services': 'Services',
    'footer.contact': 'Contact Info',
    'footer.rights': '© 2024 El Y Ella Beauty Salon. All rights reserved.',
    'footer.privacy': 'Privacy Policy',
    'footer.terms': 'Terms of Service',
  },
  es: {
    // Brand
    'brand.name': 'El Y Ella',
    'brand.tagline': 'Salón de Belleza y Estilo',
    
    // Navigation
    'nav.home': 'Inicio',
    'nav.services': 'Servicios',
    'nav.book': 'Reservar',
    
    // Home Page
    'home.hero.title': 'El Y Ella',
    'home.hero.subtitle': 'Donde la elegancia se encuentra con la experiencia. Transforma tu look con nuestros servicios premium de cabello y belleza.',
    'home.hero.book': 'Reservar Cita',
    'home.hero.services': 'Ver Servicios',
    
    'home.about.title': 'Bienvenidos a El Y Ella',
    'home.about.description1': 'Con más de 15 años de experiencia en la industria de la belleza, nuestro equipo de estilistas expertos y profesionales de la belleza se dedican a hacer que te veas y sientas absolutamente increíble.',
    'home.about.description2': 'Usamos solo los mejores productos y las técnicas más modernas para asegurar que cada visita te deje sintiéndote mimado y hermoso. Desde cortes de precisión hasta tratamientos lujosos, proporcionamos una experiencia completa de belleza en nuestro elegante y acogedor salón.',
    'home.about.years': 'Años de Experiencia',
    'home.about.clients': 'Clientes Satisfechos',
    
    'home.services.title': 'Nuestros Servicios',
    'home.services.subtitle': 'Descubre nuestra gama de servicios premium de belleza diseñados para realzar tu belleza natural',
    'home.services.hair.title': 'Servicios de Cabello',
    'home.services.hair.description': 'Cortes, colores y peinados expertos para todo tipo de cabello. Transforma tu look con nuestras técnicas de precisión.',
    'home.services.beauty.title': 'Tratamientos de Belleza',
    'home.services.beauty.description': 'Faciales rejuvenecedores, tratamientos para la piel y servicios de belleza para realzar tu brillo natural.',
    'home.services.nails.title': 'Cuidado de Uñas',
    'home.services.nails.description': 'Servicios completos de cuidado de uñas incluyendo manicuras, pedicuras y arte de uñas por técnicos especializados.',
    'home.services.viewAll': 'Ver Todos los Servicios',
    
    'home.contact.title': 'Visítanos',
    'home.contact.subtitle': 'Encuéntranos en el corazón de la ciudad, listos para atenderte',
    'home.contact.location': 'Ubicación',
    'home.contact.contact': 'Contacto',
    'home.contact.hours': 'Horarios',
    'home.contact.hours.weekdays': 'Lun-Vie: 9:00 AM - 8:00 PM',
    'home.contact.hours.saturday': 'Sábado: 9:00 AM - 6:00 PM',
    'home.contact.hours.sunday': 'Domingo: 10:00 AM - 5:00 PM',
    
    // Services Page
    'services.hero.title': 'Nuestros Servicios',
    'services.hero.subtitle': 'Servicios premium de belleza adaptados a tu estilo único',
    
    'services.hair.title': 'Servicios de Cabello',
    'services.hair.subtitle': 'Cuidado experto del cabello y peinado por nuestro equipo profesional',
    'services.hair.cuts': 'Cortes y Peinados',
    'services.hair.color': 'Servicios de Color',
    
    'services.beauty.title': 'Tratamientos de Belleza',
    'services.beauty.subtitle': 'Tratamientos rejuvenecedores para tu piel y bienestar',
    'services.beauty.facial': 'Tratamientos Faciales',
    'services.beauty.additional': 'Tratamientos Adicionales',
    
    'services.nails.title': 'Servicios de Uñas',
    'services.nails.subtitle': 'Cuidado completo de uñas para manos y pies',
    'services.nails.manicure': 'Servicios de Manicura',
    'services.nails.pedicure': 'Servicios de Pedicura',
    
    // Reservations Page
    'reservations.hero.title': 'Reserva Tu Cita',
    'reservations.hero.subtitle': 'Programa tu transformación de belleza hoy',
    'reservations.form.title': 'Formulario de Reserva',
    'reservations.submit': 'Enviar Solicitud de Reserva',
    
    // Form Labels
    'form.firstName': 'Nombre',
    'form.lastName': 'Apellido',
    'form.email': 'Correo Electrónico',
    'form.phone': 'Teléfono',
    'form.service': 'Categoría de Servicio',
    'form.stylist': 'Estilista Preferido',
    'form.date': 'Fecha Preferida',
    'form.time': 'Hora Preferida',
    'form.specificService': 'Detalles del Servicio Específico',
    'form.specialRequests': 'Solicitudes Especiales o Notas',
    'form.newClient': 'Soy un cliente nuevo',
    'form.noPreference': 'Sin preferencia',
    
    // Footer
    'footer.company': 'Salón de Belleza El Y Ella',
    'footer.description': 'Tu destino principal para servicios de lujo de cabello y belleza. Experimenta la diferencia con nuestro equipo experto.',
    'footer.quickLinks': 'Enlaces Rápidos',
    'footer.services': 'Servicios',
    'footer.contact': 'Información de Contacto',
    'footer.rights': '© 2024 Salón de Belleza El Y Ella. Todos los derechos reservados.',
    'footer.privacy': 'Política de Privacidad',
    'footer.terms': 'Términos de Servicio',
  }
};

// Global variables
let currentLanguage = 'en';

// Initialize the website
document.addEventListener('DOMContentLoaded', function() {
  // Initialize Lucide icons
  lucide.createIcons();
  
  // Initialize navigation
  initNavigation();
  
  // Initialize language switching
  initLanguageSwitching();
  
  // Initialize smooth scrolling
  initSmoothScrolling();
  
  // Initialize form handling
  initFormHandling();
  
  // Initialize image lazy loading
  initLazyLoading();
  
  // Set minimum date for reservation form
  setMinDate();
});

// Navigation functionality
function initNavigation() {
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileNav = document.getElementById('mobile-nav');
  const navLinks = document.querySelectorAll('.nav-link');
  
  // Mobile menu toggle
  mobileMenuBtn.addEventListener('click', function() {
    mobileNav.classList.toggle('show');
    const icon = mobileMenuBtn.querySelector('i');
    if (mobileNav.classList.contains('show')) {
      icon.setAttribute('data-lucide', 'x');
    } else {
      icon.setAttribute('data-lucide', 'menu');
    }
    lucide.createIcons();
  });
  
  // Close mobile menu when clicking on links
  navLinks.forEach(link => {
    link.addEventListener('click', function() {
      mobileNav.classList.remove('show');
      const icon = mobileMenuBtn.querySelector('i');
      icon.setAttribute('data-lucide', 'menu');
      lucide.createIcons();
    });
  });
  
  // Update active nav link based on scroll position
  window.addEventListener('scroll', updateActiveNavLink);
}

// Update active navigation link
function updateActiveNavLink() {
  const sections = document.querySelectorAll('section[id]');
  const navLinks = document.querySelectorAll('.nav-link');
  
  let current = '';
  sections.forEach(section => {
    const sectionTop = section.offsetTop;
    const sectionHeight = section.clientHeight;
    if (scrollY >= (sectionTop - 200)) {
      current = section.getAttribute('id');
    }
  });
  
  navLinks.forEach(link => {
    link.classList.remove('active');
    if (link.getAttribute('href') === `#${current}`) {
      link.classList.add('active');
    }
  });
}

// Language switching functionality
function initLanguageSwitching() {
  const languageBtn = document.getElementById('language-btn');
  const mobileLanguageBtn = document.getElementById('mobile-language-btn');
  
  languageBtn.addEventListener('click', toggleLanguage);
  mobileLanguageBtn.addEventListener('click', toggleLanguage);
}

function toggleLanguage() {
  currentLanguage = currentLanguage === 'en' ? 'es' : 'en';
  updateLanguage();
  updateLanguageButtons();
}

function updateLanguage() {
  const elements = document.querySelectorAll('[data-translate]');
  elements.forEach(element => {
    const key = element.getAttribute('data-translate');
    if (translations[currentLanguage][key]) {
      element.textContent = translations[currentLanguage][key];
    }
  });
  
  // Update document language
  document.documentElement.lang = currentLanguage;
}

function updateLanguageButtons() {
  const languageBtn = document.getElementById('language-btn');
  const mobileLanguageBtn = document.getElementById('mobile-language-btn');
  const text = currentLanguage === 'en' ? 'ES' : 'EN';
  
  languageBtn.textContent = text;
  mobileLanguageBtn.textContent = text;
}

// Smooth scrolling for anchor links
function initSmoothScrolling() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        const offsetTop = target.offsetTop - 64; // Account for fixed navbar
        window.scrollTo({
          top: offsetTop,
          behavior: 'smooth'
        });
      }
    });
  });
}

// Form handling
function initFormHandling() {
  const form = document.getElementById('reservation-form');
  if (form) {
    form.addEventListener('submit', handleFormSubmit);
  }
}

function handleFormSubmit(e) {
  e.preventDefault();
  
  const formData = new FormData(e.target);
  const data = Object.fromEntries(formData.entries());
  
  // Basic validation
  const requiredFields = ['firstName', 'lastName', 'email', 'phone', 'service', 'date', 'time'];
  const missingFields = requiredFields.filter(field => !data[field]);
  
  if (missingFields.length > 0) {
    showToast('Please fill in all required fields', 'error');
    return;
  }
  
  // Email validation
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(data.email)) {
    showToast('Please enter a valid email address', 'error');
    return;
  }
  
  // Simulate form submission
  const submitButton = e.target.querySelector('button[type="submit"]');
  const originalText = submitButton.textContent;
  submitButton.textContent = 'Sending...';
  submitButton.disabled = true;
  
  setTimeout(() => {
    showToast('Reservation request submitted successfully! We will contact you soon.', 'success');
    e.target.reset();
    submitButton.textContent = originalText;
    submitButton.disabled = false;
  }, 2000);
}

// Toast notification
function showToast(message, type = 'info') {
  const toast = document.getElementById('toast');
  const toastMessage = document.getElementById('toast-message');
  
  toastMessage.textContent = message;
  toast.className = `toast show ${type}`;
  
  setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => {
      toast.classList.add('hidden');
    }, 300);
  }, 4000);
}

// Image lazy loading
function initLazyLoading() {
  const images = document.querySelectorAll('img[loading="lazy"]');
  
  const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.classList.add('loaded');
        observer.unobserve(img);
      }
    });
  });
  
  images.forEach(img => {
    imageObserver.observe(img);
  });
}

// Set minimum date for reservation form
function setMinDate() {
  const dateInput = document.getElementById('date');
  if (dateInput) {
    const today = new Date();
    const tomorrow = new Date(today);
    tomorrow.setDate(tomorrow.getDate() + 1);
    dateInput.min = tomorrow.toISOString().split('T')[0];
  }
}

// Utility function to format date
function formatDate(date) {
  return new Intl.DateTimeFormat(currentLanguage, {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  }).format(date);
}

// Initialize parallax effect for hero sections
function initParallax() {
  window.addEventListener('scroll', () => {
    const scrolled = window.pageYOffset;
    const heroElements = document.querySelectorAll('.hero-bg, .hero-bg-small');
    
    heroElements.forEach(element => {
      const speed = 0.5;
      element.style.transform = `translateY(${scrolled * speed}px)`;
    });
  });
}

// Add scroll animations
function initScrollAnimations() {
  const animateElements = document.querySelectorAll('.service-card, .pricing-card, .contact-card');
  
  const animationObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.animation = 'fadeInUp 0.6s ease forwards';
      }
    });
  }, {
    threshold: 0.1
  });
  
  animateElements.forEach(element => {
    animationObserver.observe(element);
  });
}

// Add CSS animations
const style = document.createElement('style');
style.textContent = `
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .service-card,
  .pricing-card,
  .contact-card {
    opacity: 0;
  }
`;
document.head.appendChild(style);

// Initialize additional features after DOM load
document.addEventListener('DOMContentLoaded', function() {
  initParallax();
  initScrollAnimations();
});